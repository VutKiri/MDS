<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Viewer – Multi-Quality HLS</title>

  <!-- Video.js -->
  <link href="https://vjs.zencdn.net/8.3.0/video-js.css" rel="stylesheet" />
  <script src="https://vjs.zencdn.net/8.3.0/video.min.js"></script>

  <style>
    body {
      background: #111;
      color: #fff;
      padding: 20px;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    .player-wrapper {
      max-width: 960px;
    }

    #qualitySelect {
      margin-top: 10px;
      background: #222;
      color: #fff;
      border-radius: 4px;
      border: 1px solid #444;
      padding: 4px 8px;
    }

    label {
      margin-right: 8px;
    }
  </style>
</head>

<body>
  <h2>Viewer – Multi-Quality HLS</h2>

  <div class="player-wrapper">
    <video
      id="video"
      class="video-js vjs-default-skin"
      controls
      autoplay
      preload="auto"
      width="960"
      height="540"
    ></video>

    <div>
      <label for="qualitySelect">Kvalita:</label>
      <select id="qualitySelect">
        <option value="auto" selected>Automatická (master.m3u8)</option>
        <option value="1080p">1080p</option>
        <option value="720p">720p</option>
        <option value="480p">480p</option>
      </select>
    </div>
  </div>

  <script>
    // inicializácia Video.js
    var player = videojs('video');

    // zdroje pre jednotlivé kvality
    var sources = {
      auto:  '/hls/master.m3u8',
      '1080p': '/hls/1080p/index.m3u8',
      '720p':  '/hls/720p/index.m3u8',
      '480p':  '/hls/480p/index.m3u8'
    };

    // nastavíme default – automatický výber z master.m3u8
    player.src({ src: sources.auto, type: 'application/x-mpegURL' });

    // zmena kvality podľa výberu v selecte
    var select = document.getElementById('qualitySelect');
    select.addEventListener('change', function (e) {
      var q = e.target.value;
      var src = sources[q] || sources.auto;
      player.src({ src: src, type: 'application/x-mpegURL' });
      player.play();
    });
  </script>
</body>
</html>
